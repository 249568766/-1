"use strict";var utils=require("./utils"),webpack=require("webpack"),config=require("../config"),merge=require("webpack-merge"),path=require("path"),baseWebpackConfig=require("./webpack.base.conf"),CopyWebpackPlugin=require("copy-webpack-plugin"),HtmlWebpackPlugin=require("html-webpack-plugin"),FriendlyErrorsPlugin=require("friendly-errors-webpack-plugin"),portfinder=require("portfinder"),HOST=process.env.HOST,PORT=process.env.PORT&&Number(process.env.PORT),devWebpackConfig=merge(baseWebpackConfig,{module:{rules:utils.styleLoaders({sourceMap:config.dev.cssSourceMap,usePostCSS:!0})},devtool:config.dev.devtool,devServer:{clientLogLevel:"warning",historyApiFallback:{rewrites:[{from:/.*/,to:path.posix.join(config.dev.assetsPublicPath,"index.html")}]},hot:!0,contentBase:!1,compress:!0,host:HOST||config.dev.host,port:PORT||config.dev.port,open:config.dev.autoOpenBrowser,overlay:!!config.dev.errorOverlay&&{warnings:!1,errors:!0},publicPath:config.dev.assetsPublicPath,proxy:config.dev.proxyTable,quiet:!0,watchOptions:{poll:config.dev.poll}},plugins:[new webpack.DefinePlugin({"process.env":require("../config/dev.env")}),new webpack.HotModuleReplacementPlugin,new webpack.NamedModulesPlugin,new webpack.NoEmitOnErrorsPlugin,new HtmlWebpackPlugin({filename:"index.html",template:"index.html",favicon:path.resolve(__dirname,"../src/assets/img/favicon.ico"),inject:!0}),new CopyWebpackPlugin([{from:path.resolve(__dirname,"../static"),to:config.dev.assetsSubDirectory,ignore:[".*"]}])]});module.exports=new Promise(function(o,i){portfinder.basePort=process.env.PORT||config.dev.port,portfinder.getPort(function(e,r){e?i(e):(process.env.PORT=r,devWebpackConfig.devServer.port=r,devWebpackConfig.plugins.push(new FriendlyErrorsPlugin({compilationSuccessInfo:{messages:["Your application is running here: http://".concat(devWebpackConfig.devServer.host,":").concat(r)]},onErrors:config.dev.notifyOnErrors?utils.createNotifierCallback():void 0})),o(devWebpackConfig))})});